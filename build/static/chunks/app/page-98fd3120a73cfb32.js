(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3692:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var a=s(2311),r=s(2847),l=s(6252),n=s.n(l),o=s(4225),i=s(2744),d=s(1838);function c(e){let{onFileUpload:t}=e,[s,l]=(0,r.useState)(!1),[n,o]=(0,r.useState)(null),c=async e=>{if(e&&e.preventDefault(),!n)return;let s=new FormData;s.append("file",n);try{let e=await fetch("/api/files",{method:"POST",body:s});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to upload file")}await e.json(),t(),o(null)}catch(e){console.error("Error uploading file:",e)}};return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(i.l,{handleChange:e=>{o(e)},name:"file",types:["JPG","PNG","PDF","DOC","DOCX","XLS","XLSX","TXT"],maxSize:10,onTypeError:e=>console.log(e),onSizeError:e=>console.log(e),classes:"dropzone",onDraggingStateChange:e=>l(e),dropMessageStyle:{backgroundColor:"rgba(59, 130, 246, 0.05)"},children:(0,a.jsx)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-all ".concat(s?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-blue-400"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-6",children:[(0,a.jsx)(d.A,{className:"w-12 h-12 text-blue-500 mb-4"}),(0,a.jsx)("p",{className:"mb-2 font-semibold text-gray-700",children:"Drop files here or click to browse"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Supported formats: JPG, PNG, PDF, DOC, etc."}),n&&(0,a.jsx)("div",{className:"mt-4 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:n.name})]})})})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{onClick:c,disabled:!n,className:"px-4 py-2 rounded-lg text-white transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(n?"bg-blue-600 hover:bg-blue-700":"bg-blue-400 cursor-not-allowed"),children:"Upload File"})})]})}function x(){(0,o.usePathname)();let[e,t]=(0,r.useState)(!1);return(0,a.jsxs)("header",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 shadow-md py-3 md:py-4 sticky top-0 z-20 border-b border-blue-100 animate-fade-in",children:[(0,a.jsx)("div",{className:"px-6 md:px-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-0",children:[(0,a.jsxs)(n(),{href:"/",className:"flex items-center space-x-2 md:space-x-3 group mb-3 sm:mb-0",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 p-2 md:p-3 rounded-xl shadow-lg group-hover:shadow-xl transition-all duration-300 transform group-hover:-translate-y-1",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl md:text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-700 tracking-tight",children:"CloudVault"}),(0,a.jsx)("p",{className:"text-xs text-indigo-500 font-semibold tracking-wide hidden sm:block",children:"Secure Cloud Storage Solution"})]})]}),(0,a.jsxs)("button",{className:"w-full sm:w-auto px-4 md:px-5 py-2 md:py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-300 flex items-center justify-center space-x-2 cursor-pointer",onClick:()=>t(!0),children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 md:h-5 md:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,a.jsx)("span",{className:"font-medium text-sm md:text-base",children:"Upload Files"})]})]})}),e&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-3 md:p-0",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 md:p-6 max-w-2xl w-full mx-2 md:m-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg md:text-xl font-bold text-black",children:"Upload Files"}),(0,a.jsx)("button",{onClick:()=>t(!1),className:"text-gray-500 hover:text-gray-700 cursor-pointer",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)(c,{onFileUpload:()=>{t(!1)}})]})})]})}function m(e){let{onSearch:t}=e,[s,l]=(0,r.useState)("");return(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),(0,a.jsx)("input",{type:"search",className:"block w-full p-2.5 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-white focus:ring-blue-500 focus:border-blue-500",placeholder:"Search files by name...",value:s,onChange:e=>{let s=e.target.value;l(s),t(s)}})]})}var h=s(8838);let u=e=>e.slice((e.lastIndexOf(".")-1>>>0)+2),p=e=>{let t=u(e).toLowerCase();return({pdf:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),doc:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),docx:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),xls:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5 4a1 1 0 00-1 1v10a1 1 0 001 1h10a1 1 0 001-1V5a1 1 0 00-1-1H5zm6 7a1 1 0 10-2 0v3a1 1 0 102 0v-3z",clipRule:"evenodd"})}),xlsx:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5 4a1 1 0 00-1 1v10a1 1 0 001 1h10a1 1 0 001-1V5a1 1 0 00-1-1H5zm6 7a1 1 0 10-2 0v3a1 1 0 102 0v-3z",clipRule:"evenodd"})}),jpg:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-purple-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),jpeg:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-purple-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),png:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-purple-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),gif:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),txt:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),zip:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-yellow-700",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5 4a1 1 0 011-1h8a1 1 0 011 1v4H5V4zm4 7a1 1 0 00-1 1v1h2v-1a1 1 0 00-1-1zm3 0a1 1 0 00-1 1v1h2v-1a1 1 0 00-1-1zM4 4a2 2 0 012-2h8a2 2 0 012 2v4.586l1.707 1.707A1 1 0 0118 11v6a2 2 0 01-2 2H4a2 2 0 01-2-2v-6a1 1 0 01.293-.707L4 8.586V4z",clipRule:"evenodd"})}),rar:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-yellow-700",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5 4a1 1 0 011-1h8a1 1 0 011 1v4H5V4zm4 7a1 1 0 00-1 1v1h2v-1a1 1 0 00-1-1zm3 0a1 1 0 00-1 1v1h2v-1a1 1 0 00-1-1zM4 4a2 2 0 012-2h8a2 2 0 012 2v4.586l1.707 1.707A1 1 0 0118 11v6a2 2 0 01-2 2H4a2 2 0 01-2-2v-6a1 1 0 01.293-.707L4 8.586V4z",clipRule:"evenodd"})})})[t]||(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})})},g=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},w=e=>new Date(e).toLocaleString(),f=(e,t)=>{t.stopPropagation(),window.open("/api/files?fileName=".concat(encodeURIComponent(e)),"_blank")},v=async(e,t)=>{if(t.stopPropagation(),confirm("Are you sure you want to delete ".concat(e,"?")))try{let t=await fetch("/api/files?fileName=".concat(encodeURIComponent(e)),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.message||"Failed to delete file")}}catch(e){console.error("Error deleting file:",e)}};function b(e){let{file:t,onClose:s}=e,l=(0,r.useRef)(null);return((0,r.useEffect)(()=>{let e=e=>{l.current&&!l.current.contains(e.target)&&s()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[s]),(0,r.useEffect)(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),t)?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:(0,a.jsxs)(h.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},ref:l,className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 max-w-lg w-full mx-auto border border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-5",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"File Details"}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 bg-transparent hover:bg-gray-200 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white rounded-lg p-2 transition-colors","aria-label":"Close",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded-full mb-3",children:p(t.name)}),(0,a.jsx)("h4",{className:"text-xl font-semibold mt-2 text-center break-all text-gray-800 dark:text-gray-200",children:t.name})]}),(0,a.jsxs)("div",{className:"space-y-4 bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"Size:"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:(e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]})(t.size)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"Type:"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded text-sm",children:u(t.name).toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"Last Modified:"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:new Date(t.modified).toLocaleString()})]})]}),(0,a.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)("button",{onClick:()=>window.open("/api/files?fileName=".concat(encodeURIComponent(t.name)),"_blank"),className:"bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 flex items-center justify-center font-medium",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]}),(0,a.jsx)("button",{onClick:s,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 py-3 px-4 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50 font-medium",children:"Close"})]})]})}):null}function j(e){let{requestSort:t,getSortIndicator:s,sortedFiles:l}=e,[n,o]=(0,r.useState)([]),[i,d]=(0,r.useState)(null),c=(e,t)=>{t.stopPropagation(),o(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsx)(b,{file:i,onClose:()=>d(null)}),n.length>0&&(0,a.jsxs)("div",{className:"flex justify-end mb-4 space-x-2 md:space-x-3 absolute top-4 right-0 mr-6",children:[(0,a.jsxs)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation();let t=document.createElement("iframe");t.style.display="none",document.body.appendChild(t),n.forEach((e,s)=>{setTimeout(()=>{t.contentWindow&&(t.contentWindow.location.href="/api/files?fileName=".concat(encodeURIComponent(e)))},500*s)}),setTimeout(()=>{document.body.removeChild(t)},500*n.length+1e3)},className:"px-2 py-1 md:px-3 md:py-1 bg-blue-600 text-white text-xs md:text-sm rounded hover:bg-blue-700 flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 md:h-4 md:w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Batch Download"}),(0,a.jsxs)("span",{children:["(",n.length,")"]})]}),(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),n.forEach(t=>{v(t,e)}),o([])},className:"px-2 py-1 md:px-3 md:py-1 bg-red-600 text-white text-xs md:text-sm rounded hover:bg-red-700 flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 md:h-4 md:w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Batch Delete"}),(0,a.jsxs)("span",{children:["(",n.length,")"]})]})]}),(0,a.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:(0,a.jsxs)("table",{className:"min-w-full bg-white",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-2 md:py-3 px-1 md:px-2 w-8 md:w-10 text-center",children:(0,a.jsx)("span",{className:"sr-only",children:"Select"})}),(0,a.jsx)("th",{className:"py-2 md:py-3 px-2 md:px-4 text-left text-xs font-medium text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>t("name"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("span",{children:"Name"}),s("name")&&(0,a.jsx)("span",{className:"text-blue-600 font-bold",children:s("name")})]})}),(0,a.jsx)("th",{className:"hidden sm:table-cell py-2 md:py-3 px-2 md:px-4 text-left text-xs font-medium text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>t("size"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("span",{children:"Size"}),s("size")&&(0,a.jsx)("span",{className:"text-blue-600 font-bold",children:s("size")})]})}),(0,a.jsx)("th",{className:"hidden md:table-cell py-2 md:py-3 px-2 md:px-4 text-left text-xs font-medium text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>t("modified"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("span",{children:"Modified"}),s("modified")&&(0,a.jsx)("span",{className:"text-blue-600 font-bold",children:s("modified")})]})}),(0,a.jsx)("th",{className:"py-2 md:py-3 px-2 md:px-4 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:t=>{c(e.name,t)},children:[(0,a.jsx)("td",{className:"py-2 md:py-4 px-1 md:px-2 text-center",children:(0,a.jsx)("input",{type:"checkbox",className:"h-3 w-3 md:h-4 md:w-4 text-blue-600 rounded focus:ring-blue-500",checked:n.includes(e.name),onChange:t=>c(e.name,t),onClick:e=>e.stopPropagation()})}),(0,a.jsx)("td",{className:"py-2 md:py-4 px-2 md:px-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1 md:space-x-2",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:p(e.name)}),(0,a.jsx)("span",{className:"text-xs md:text-sm font-medium text-gray-900 truncate max-w-[100px] sm:max-w-[150px] md:max-w-[200px]",children:e.name})]})}),(0,a.jsx)("td",{className:"hidden sm:table-cell py-2 md:py-4 px-2 md:px-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"text-xs md:text-sm text-gray-500",children:g(e.size)})}),(0,a.jsx)("td",{className:"hidden md:table-cell py-2 md:py-4 px-2 md:px-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"text-xs md:text-sm text-gray-500",children:w(e.modified)})}),(0,a.jsx)("td",{className:"py-2 md:py-4 px-2 md:px-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1 md:space-x-3",children:[(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),d(e)},className:"p-1 md:p-1.5 bg-blue-50 rounded-full text-blue-600 hover:bg-blue-100 hover:text-blue-800 transition-all duration-200 transform hover:scale-110 cursor-pointer",title:"View details",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 md:h-4 md:w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),f(e.name,t)},className:"p-1 md:p-1.5 bg-green-50 rounded-full text-green-600 hover:bg-green-100 hover:text-green-800 transition-all duration-200 transform hover:scale-110 cursor-pointer",title:"Download",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 md:h-4 md:w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),(0,a.jsx)("button",{onClick:t=>{v(e.name,t)},className:"p-1 md:p-1.5 bg-red-50 rounded-full text-red-600 hover:bg-red-100 hover:text-red-800 transition-all duration-200 transform hover:scale-110 cursor-pointer",title:"Delete",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 md:h-4 md:w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e.name))})]})})]})}function y(e){let{files:t,isLoading:s,onDelete:l}=e,[n,o]=(0,r.useState)(""),[i,d]=(0,r.useState)(null),[c,x]=(0,r.useState)({key:"name",direction:"ascending"}),[u,p]=(0,r.useState)(!1),g=t.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())),w=[...g].sort((e,t)=>"size"===c.key?"ascending"===c.direction?e.size-t.size:t.size-e.size:"modified"===c.key?"ascending"===c.direction?new Date(e.modified)-new Date(t.modified):new Date(t.modified)-new Date(e.modified):"ascending"===c.direction?e.name.localeCompare(t.name):t.name.localeCompare(e.name));return(0,a.jsxs)("section",{className:"border rounded-lg p-6 bg-white shadow-md relative",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Files"}),!s&&t.length>0&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(m,{onSearch:e=>{o(e)}})}),s?(0,a.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-700"}),(0,a.jsx)("span",{className:"ml-3 text-gray-600 font-medium",children:"Loading files..."})]}):0===t.length?(0,a.jsxs)(h.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"})}),(0,a.jsx)("p",{className:"mt-4 text-gray-600 font-medium",children:"No files available"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Upload files to get started"})]}):0===g.length?(0,a.jsxs)(h.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,a.jsx)("p",{className:"mt-4 text-gray-600 font-medium",children:"No files match your search"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Try different keywords"})]}):(0,a.jsx)("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:(0,a.jsx)(j,{requestSort:e=>{let t="ascending";c.key===e&&"ascending"===c.direction&&(t="descending"),x({key:e,direction:t})},getSortIndicator:e=>c.key!==e?null:"ascending"===c.direction?"↑":"↓",handleFileClick:e=>{d(e),p(!0)},sortedFiles:w,onDelete:l})})]})}function k(e){let{files:t}=e,s=()=>t.reduce((e,t)=>e+t.size,0),r=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},l=()=>{let e={};return t.forEach(t=>{let s=t.name.split(".").pop().toLowerCase();e[s]=(e[s]||0)+1}),e},n=Object.keys(l()).length,o=(()=>{let e=l(),t="",s=0;return Object.entries(e).forEach(e=>{let[a,r]=e;r>s&&(t=a,s=r)}),{type:t?t.toUpperCase():"N/A",count:s}})();return(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 transition-all",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-5 text-gray-800 dark:text-white flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"File Statistics"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900 dark:to-blue-800 p-4 rounded-lg border border-blue-200 dark:border-blue-700 hover:shadow-md transition-all",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-200 dark:bg-blue-700 rounded-full",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-600 dark:text-blue-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-300",children:"Total Files"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.length})]})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900 dark:to-green-800 p-4 rounded-lg border border-green-200 dark:border-green-700 hover:shadow-md transition-all",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-200 dark:bg-green-700 rounded-full",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-600 dark:text-green-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-300",children:"Total Size"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r(s())})]})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900 dark:to-purple-800 p-4 rounded-lg border border-purple-200 dark:border-purple-700 hover:shadow-md transition-all",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-200 dark:bg-purple-700 rounded-full",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-purple-600 dark:text-purple-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-300",children:"File Types"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n})]})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900 dark:to-amber-800 p-4 rounded-lg border border-amber-200 dark:border-amber-700 hover:shadow-md transition-all",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-amber-200 dark:bg-amber-700 rounded-full",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-amber-600 dark:text-amber-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-300",children:"Average Size"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r(0===t.length?0:s()/t.length)})]})]})})]}),t.length>0&&(0,a.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Most common file type:"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 py-1 px-3 rounded-full",children:o.type}),o.count>1&&(0,a.jsxs)("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-400",children:["(",o.count," files)"]})]})]})})]})}var N=s(4664);function C(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[n,o]=(0,r.useState)(!1);(0,r.useEffect)(()=>{i()},[]);let i=async()=>{l(!0);try{let e=await fetch("/api/files");if(!e.ok)throw Error("Failed to fetch files");let s=await e.json();t(s.files);let a=async e=>{try{let s=await fetch("/api/files?poll=true&since=".concat(e));if(!s.ok)return;let r=await s.json();if(r.changes){let e=await fetch("/api/files");if(e.ok){let s=await e.json();t(s.files)}}setTimeout(()=>a(r.timestamp),2e3)}catch(e){console.error("Polling error:",e),setTimeout(()=>a(Date.now()),5e3)}};a(Date.now())}catch(e){console.error("Error fetching files:",e)}finally{l(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-slate-50 to-slate-100",children:[(0,a.jsx)(x,{}),(0,a.jsxs)("div",{className:"container mx-auto max-w-6xl",children:[(0,a.jsxs)("div",{className:"fixed right-0 bottom-10 z-50",children:[(0,a.jsx)("button",{onClick:()=>o(!n),className:"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-l-lg shadow-lg transition-all duration-300 hover:scale-110 flex items-center justify-center",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsx)("div",{className:"fixed right-0 bottom-25 bg-white rounded-l-lg shadow-xl transition-all duration-500 ease-in-out ".concat(n?"translate-x-0":"translate-x-full"),children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>o(!1),className:"absolute top-2 left-2 bg-gray-200 rounded-full p-1 hover:bg-gray-300 transition-all duration-200",children:(0,a.jsx)(N.A,{className:"h-4 w-4 text-gray-900"})}),(0,a.jsx)(k,{files:e})]})})]}),(0,a.jsx)("div",{className:"slide-up",children:(0,a.jsx)(y,{files:e,isLoading:s,onDelete:i})})]})]})}},8607:(e,t,s)=>{Promise.resolve().then(s.bind(s,3692))}},e=>{var t=t=>e(e.s=t);e.O(0,[305,789,20,358],()=>t(8607)),_N_E=e.O()}]);